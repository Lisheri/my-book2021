# 你真的了解React吗？

这个题目也叫做：解释React是什么？

或者是： 谈谈你对React的理解。

实际上他们都是一个问题，就是要解释React的本质。

由于缺少相关的方法论

+ 所以才会出现知道是什么，但是无法清晰的表达
+ 所以我们既要重视知识本身，也要重视表达的方法

这个题主要是想考察面试者对于React的理解程度

这个问题回到React的本质上来

解释React是什么一共可以分为四个部分，讲说理列

+ 讲概念： 一句话解释技术本身(技术本质)
+ 说用途： 简短说明技术用途(使用场景)
+ 理思路： 概要说明核心技术思路(理核心技术思路)
+ 列优缺点： 
  - 独特优势 
  - 个别缺点

## 概念

回归本质，React本身是一个网页UI框架。当然这样的答案并不令人满意，需要回顾历史，去寻找答案。

React诞生于JQ, AngularJS, Backbone.js相继流行的年代。JQ诞生于2005年，那时候的浏览器是当时最大的问题。为了解决这个问题，JQ封装DOM操作，提供样式选择器，封装AJAX，链式操作等大量基础函数。但是从现在的角度来看，JQ并没有解决代码如何组织的问题，因此它并不能称之为框架，本质上是一个工具函数库。

无论是JQ的输入端还是输出端来看，一切都是混沌的。HTML、CSS、JS就像原料一样被送入JQ搅拌机，通过一通搅拌，就拌出了一个网页。其中并没有称之为模式的方式将这些原料有序的组合在一起，因为这并不是JQ能解决的问题。

![JQ时代](https://s0.lgstatic.com/i/image/M00/72/A0/CgqCHl_EZ-GASOvLAAColjE_COU357.png)

当然，在那个年代，网页复杂度还不够，效果也不需要做的多炫酷。然而当PC性能越来越好，页面越来越复杂，效果也越来越花里胡哨的今天，前端的工程变得庞大了起来。如何`组织代码结构，如何有效提升复用率，开始成为大家亟待解决的问题。`

2009年`AngularJS`横空出世，带着JAVA的先进经验闯入前端世界中。它不仅引入了MVC思想，还强行灌入了controller、$scope、service等一系列概念。如同springBoot，angularJS提供了一揽子的全家桶解决方案，从底层开始深度封装，向上提供了路由、双向绑定、指令、组件等框架特性。

AngularJS的分层设计是齐全且优秀的，覆盖了整个Web开发的方方面面。MVC他有，数据绑定他有，前端路由他有，表单校验他有，设计模式他有，内容多到像一个百科全书，如下图所示。

![angular](https://s0.lgstatic.com/i/image/M00/72/A0/CgqCHl_EZ-2AaA3VAADybjxzNnA353.png)

但是也因为它庞大而复杂的概念，让我们在使用AngularJS进行开发的时候，需要编写大量的面条代码，让人感觉不是在写前端，而是在写AngularJS。JQ时代和AngularJS时代，一个最明显的区别在于，JQ是在和浏览器作斗争，而AngularJS是在和AngularJS作斗争。代码如何组织是清晰了，可是数不清的概念，让AngularJS看起来像是披着前端皮的JAVA框架。甚至有人感慨，这一切值得吗？

当然，也有值得的地方，AngularJS的双向绑定是当时最大的特色。双向数据绑定在中后台网页开发中极大的提升了开发效率。中后台页面几乎全是表单与列表。双向绑定使值和视图动态可以自动更新，节约了几乎一半以上需要手动开发代码的时间。

时间在走一点，到了2010年，希望代码有序组织起来，又不想陷入AngularJS的无穷概念的包围中，那么Backbone.JS是一个很好的选择，他没有带来AngularJS那么多的概念，还考虑了两个方面

+ 与前代的亲和性，只要你懂JQ，你就可以快乐的写前端代码，而不是在学一门语言
+ 考虑了代码的组织性，引入了基础的MVC概念，同时提供集合与前端路由的封装，补齐了JQ无序的短板。

对于初学者而言，Backbone足够友好，甚至一度流行。主要原因在于他使前端项目工程化的成本足够低。低不光在开发人员的学习成本低，还有改造成本也低，对于jQ项目可以尝试迁移。

回顾历史就会发现，前端项目在不断的工程化，同时也在不断地发展出新概念。这两个问题还是难以解决的：

+ 与后端不同的是，前端主要以UI组件为基础，需要一个可以使组件复用的开发方案，过去常见的复用方案是拼装模板
+ 前端工程越来越复杂，组件作为基本单位应该是可以编写单元测试来维持稳定性的

基于过去的模式，要做到上面的两点非常困难。你会发现过去的框架通常是从页面的纬度去思考，然后零星的装上Jq的各种小插件。

初次接触React就会发现，开发React的思维模式是完全不同的，概念也极其简单。可以用一个简洁明了的公式表示：

```View = fn(props)```

这个公式表达了给定相同的输入状态，函数总是会生成输出一致的组件。只有做到输入与输出恒定，那么他才是可测的。

其实在fn内部也是无数个组件构成的。React中只有组件，没有页面，没有控制器，也没有模型。页面是组件生成的，组件也充当控制器。就像乐高搭建玩具一样。

当然React的变量要稍微多一点，还要将state和Context添加进去，表达式就变成了这样:

```View = fn(props, state, context)```

从实际编码来讲，fn可能是一个类组件，也可能是纯函数组件，也可能在函数中产生影响UI生成的副作用，比如直接操作DOM或者绑定事件等。毕竟经典的公式总是展示的理想情况，如同 `E = mc^2`, 但是不妨碍它表达了一个结论。

因此在React中实际上只关心两件事: 数据和组件。

为什么基本单位是组件呢，因为有一个铁律，就是`组合优于继承`。因此在构建视图的时候，组合组件永远是最优的解决方案。

而React通过组件化的方式解决视图层开发复用的问题，本质上是一个UI框架。

## 用途

React的用途肯定是构建视图。由于React虚拟DOM的关系，适用的场景远远比传统框架更广泛：

+ 首先无论是PC网页还是移动端网页都是完全支持的
+ 其次由于React Native也可以开发IOS和android应用
+ 还有React360可以开发VR应用
+ 冷门点的如ink，可以使用React开发命令行应用

React的生态极大的丰富了他的使用场景

## 核心思路

React的核心思路有三点，分别是声明式，组件化和通用性。

### 声明式

声明式编程优点在于直观，可以做到一目了然，便于组合。

### 组件化

组件化可以降低系统间的耦合度，提高功能内部的聚合性。对于前端工程和代码的复用有极大的好处。React组件最大的区别在于没有使用模板进行编写，而是使用了声明式的JSX

### 通用性

这就在于React的虚拟DOM，将DOM抽象成虚拟DOM，开发者一般不会直接操作DOM。正因为有着一层封装，让React不再局限于网页开发，可以走向更宽广的平台，出现繁荣的生态。无论是Native、VR还是Shell命令，只要兼容虚拟DOM，都可以直接运行React。

## 优缺点

### React的优点在于他的核心思路的三点：声明式、组件化、通用性。

### 缺点

当然 React 也有缺点， 由于 React 并不是一个一揽子框架，比如路由一类的功能，React 团队更希望交给社区来解决。所以导致在技术选型与学习使用上有比较高的成本。但也正因为社区蓬勃发展，非官方的一揽子解决方案还是有的，比如 DvaJS、React-coat 等填补了生态位的缺失。所以 React 也是一个使用者上限与下限差距极大的框架。

## 答题
React是一个网页UI框架，通过组件化的方式解决视图层开发复用问题，本质是一个组件化的框架。

它的核心设计思路有三点，分别是声明式、组件化和通用性。

声明式的优势在于直观和组合。

组件化的优势在于组件的拆分和模块的复用，可以更容易的做到高内聚低耦合。

通用性在于一次学习，到处编写。比如ReactNative，React360等，主要是依靠虚拟DOM来实现。

这使得React的适用范围变得足够广，无论是web，ios/android还是VR，又或者是shell应用都可以进行开发，这也是React的一个优势。

但作为一个视图层的框架，React的劣势也非常明显，它并没有提供完整的一揽子解决方案，在开发大型前端应用中，需要向社区寻找并整合解决方案。虽然一定程度上促进了社区的繁荣，但也为开发者在学习和适用上造成了一定的成本。

### 此题还可以补充关于React优势的开发，关于虚拟DOM的看法，谈一谈React相关的工程架构与设计模式。
